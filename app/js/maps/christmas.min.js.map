{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/js/christmas.js","app/js/modules/christmas_main.js","app/js/modules/christmas_vk.js"],"names":[],"mappings":"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","file":"../christmas.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","// Импорт главного класса\r\n// import ChristmasLights from './modules/christmas_main';\r\nimport ChristmasLights from './modules/christmas_vk';\r\n\r\n// Стили для скрипта\r\nconst christmas_style = `\r\nbody {\r\n  position: relative;\r\n  min-width: 100%;\r\n  min-height: 100vh;\r\n  margin: 0;\r\n}\r\n\r\n#christmas-container {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: -9999;\r\n  overflow: hidden;\r\n}\r\n\r\n.christmas-item {\r\n  width: 10px;\r\n  height: 10px;\r\n  position: absolute;\r\n  will-change: transform, opacity;\r\n  border-radius: 50%;\r\n}\r\n\r\n.christmas-item_red {\r\n\r\n}\r\n\r\n.christmas-item_yellow {\r\n\r\n}\r\n\r\n.christmas-item_green {\r\n\r\n}\r\n\r\n.christmas-item_blue {\r\n\r\n}\r\n\r\n.christmas-item:before {\r\n  content: '';\r\n  display: block;\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  width: 8px;\r\n  height: 8px;\r\n  top: 50%;\r\n  left: 50%;\r\n  will-change: transform, opacity;\r\n  transform: translate3d(-50%, -50%, 1px) scale(0);\r\n}\r\n\r\n.christmas-item:after {\r\n  content: '';\r\n  display: block;\r\n  position: absolute;\r\n  border-radius: 50%;\r\n  width: 10px;\r\n  height: 10px;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate3d(-50%, -50%, 1px);\r\n}\r\n\r\n.christmas-item_red:before {\r\n  /* #FA0C00 */\r\n  box-shadow: 0 0 20px 6px rgba(250, 12, 0, 1);\r\n  animation-delay: 0s;\r\n}\r\n\r\n.christmas-item_red:after {\r\n  background: #F32613;\r\n}\r\n\r\n.christmas-item_yellow:before {\r\n  /* #FAF200 */\r\n  box-shadow: 0 0 20px 6px rgba(250, 242, 0, .8);\r\n  animation-delay: .5s;\r\n}\r\n\r\n.christmas-item_yellow:after {\r\n  background: #F0F343;\r\n}\r\n\r\n.christmas-item_green:before {\r\n  /* #2AFA00 */\r\n  box-shadow: 0 0 20px 6px rgba(42, 250, 0, .8);\r\n  animation-delay: 1s;\r\n}\r\n\r\n.christmas-item_green:after {\r\n  background: #61F351;\r\n}\r\n\r\n.christmas-item_blue:before {\r\n  /* #23FFF4 */\r\n  box-shadow: 0 0 20px 8px rgba(35, 255, 244, .6);\r\n  animation-delay: 1.5s;\r\n}\r\n\r\n.christmas-item_blue:after {\r\n  background: #89f3ef;\r\n}\r\n\r\n.christmas-item-anim:before {\r\n  animation-name: christmas-item-anim;\r\n  animation-duration: 1.7s;\r\n  animation-timing-function: linear;\r\n  animation-iteration-count: infinite;\r\n}\r\n\r\n@keyframes christmas-item-anim {\r\n  0% {\r\n      transform: translate3d(-50%, -50%, 1px) scale(.6);\r\n      opacity: .7;\r\n  }\r\n  50% {\r\n      transform: translate3d(-50%, -50%, 1px) scale(.9);\r\n      opacity: 1;\r\n  }\r\n  100% {\r\n      transform: translate3d(-50%, -50%, 1px) scale(.6);\r\n      opacity: .7;\r\n  }\r\n}\r\n`;\r\n\r\n\r\n\r\n// Чтобы не грузилось в iframe\r\nif (window.top === window) {\r\n    requestAnimationFrame(function launch() {\r\n        if (!document.body) {\r\n            console.log('body еще нет');\r\n\r\n            requestAnimationFrame(launch);\r\n        } else {\r\n            console.log('%c%s', (window.log_color) ? window.log_color.purple : '', '*Christmas lights* Запуск рабочего скрипта');\r\n\r\n            window.christmasLights = new ChristmasLights({\r\n                // Количество фонариков\r\n                amount: 50,\r\n\r\n                // Максимальное отклонение от центральной позиции\r\n                deviation: 30,\r\n\r\n                // В какой блок вставлять (альфа, сейчас глючит все, кроме body)\r\n                parent: 'body',\r\n\r\n                // Инъекция стилей (не трогать)\r\n                style_content: christmas_style\r\n            });\r\n\r\n            // Кнопка обновления позиции фонариков\r\n            const btn_update = document.querySelector('.btn_update');\r\n            if (btn_update && window.christmasLights) {\r\n                btn_update.addEventListener('click', () => {\r\n                    window.christmasLights.updatePosition();\r\n                })\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n\r\n// //////////////////","/* Christmas lights */\r\nexport default class ChristmasLights {\r\n    constructor(settings = {}) {\r\n        this.color_classes = {\r\n            red: 'christmas-item_red',\r\n            yellow: 'christmas-item_yellow',\r\n            green: 'christmas-item_green',\r\n            blue: 'christmas-item_blue'\r\n        };\r\n\r\n        // Общее количество фонариков\r\n        this.amount = settings.amount || 40;\r\n\r\n        // Максимальное отклонение фонариков от базовой позиции\r\n        this.deviation = settings.deviation || 10\r\n\r\n        // Количество каждого цвета\r\n        this.color_amount = {\r\n            red: Math.floor(this.amount / 4),\r\n            yellow: Math.floor(this.amount / 4),\r\n            green: Math.floor(this.amount / 4),\r\n            blue: this.amount - (Math.floor(this.amount / 4) * 3)\r\n        }\r\n\r\n        // Селектор блока, в котором будет создаваться контейнер\r\n        this.parent = document.querySelector(settings.parent) || document.querySelector('body');\r\n\r\n        // Переменная, содержащая в себе текстовый контент стилей\r\n        this.style_content = settings.style_content;\r\n\r\n        // Контейнер, в котором будут создаваться фонарики\r\n        this.container = document.createElement('div');\r\n\r\n        // Размеры контейнера\r\n        this.container_size = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n\r\n        // Массив созданных элементов-фонариков\r\n        this.buffer = [];\r\n\r\n        // Флаг паузы движения\r\n        this.pause_run = false;\r\n\r\n\r\n        // Точка входа\r\n        this.init();\r\n    }\r\n\r\n    // Возвращает рандомное число в указанных границах\r\n    rand(min, max) {\r\n        let rand = Math.floor(min + Math.random() * (max + 1 - min));\r\n        if (rand === 0) {\r\n            rand++;\r\n        }\r\n        return rand;\r\n    }\r\n\r\n    initAnimation(item) {\r\n        requestAnimationFrame(() => {\r\n            item.elem.classList.add('christmas-item-anim');\r\n        })\r\n    }\r\n\r\n    // Первый звпуск движения всех фонариков\r\n    firstRun() {\r\n        setTimeout(() => {\r\n            this.buffer.forEach((item, index) => {\r\n                item.x = 0;\r\n                item.y = 0;\r\n                this.runItem(index);\r\n                this.initAnimation(item);\r\n            })\r\n        }, 0);\r\n    }\r\n\r\n    // Запускает движение фонарика\r\n    runItem(index) {\r\n        let item = this.buffer[index];\r\n\r\n        let x = item.x + this.rand(-4, 4);\r\n        let y = item.y + this.rand(-4, 4);\r\n\r\n        x = (x < (0 - this.deviation)) ? 0 : (x > this.deviation) ? 0 : x;\r\n        y = (y < (0 - this.deviation)) ? 0 : (y > this.deviation) ? 0 : y;\r\n\r\n        this.buffer[index].x = x;\r\n        this.buffer[index].y = y;\r\n\r\n        let transform_duration = this.rand(1500, 2500);\r\n        this.buffer[index].elem.style.transition = `transform ${transform_duration}ms ease-in-out, top ${transform_duration}ms ease-in-out, left ${transform_duration}ms ease-in-out`;\r\n        this.buffer[index].elem.style.transform = `translate3d(${x}px, ${y}px, 1px)`;\r\n    }\r\n\r\n    // Метод для остановки/возобновления движения фонариков\r\n    pauseRun(flag) {\r\n        if (typeof flag === 'boolean') {\r\n            this.pause_run = flag;\r\n        } else {\r\n            this.pause_run = !this.pause_run;\r\n        }\r\n\r\n        if (!this.pause_run) {\r\n            this.firstRun();\r\n            return 'Run';\r\n        }\r\n\r\n        return 'Pause';\r\n    }\r\n\r\n    // Инициализация движения фонариков и слушателя его окончания\r\n    initRun() {\r\n        this.container.addEventListener('transitionend', e => {\r\n            if (e.propertyName === 'transform' && !this.pause_run) {\r\n                // console.log(e.propertyName);\r\n                this.runItem(Number(e.target.dataset.christmasItem));\r\n            }\r\n        });\r\n\r\n        // И запускаем первое движение\r\n        setTimeout(() => {\r\n            this.firstRun();\r\n        }, 100);\r\n    }\r\n\r\n    // Меняет положение всех фонариков\r\n    updatePosition() {\r\n        this.container_size.x = window.innerWidth;\r\n        this.container_size.y = window.innerHeight;\r\n        this.buffer.forEach(item => {\r\n            this.setPosition(item);\r\n        })\r\n    }\r\n\r\n    // Задает позицию фонарика\r\n    setPosition(item) {\r\n        requestAnimationFrame(() => {\r\n            item.elem.style.top = this.rand(0 + 15, this.container_size.y - 15) + 'px';\r\n            item.elem.style.left = this.rand(0 + 15, this.container_size.x - 15) + 'px';\r\n        })\r\n    }\r\n\r\n    appendItem(elem) {\r\n        requestAnimationFrame(() => this.container.appendChild(elem))\r\n    }\r\n\r\n    // Генерация фонариков\r\n    itemsGenerator() {\r\n        let item_index = 0;\r\n        for (let color in this.color_amount) {\r\n            let amount = this.color_amount[color];\r\n\r\n            for (let i = 0; i < amount; i++) {\r\n                let item = {\r\n                    x: 0,\r\n                    y: 0\r\n                };\r\n                let elem = document.createElement('div');\r\n                elem.classList.add('christmas-item', this.color_classes[color]);\r\n                elem.dataset.christmasItem = item_index;\r\n                item.elem = elem;\r\n                this.setPosition(item);\r\n\r\n                this.buffer[item_index] = item;\r\n                this.appendItem(elem);\r\n\r\n                item_index++;\r\n            }\r\n        }\r\n\r\n        // После генерации всех фонариков вешаем на контейнер слушатель transitionend\r\n        this.initRun();\r\n    }\r\n\r\n    // Вставка стилей внутрь контейнера\r\n    styleInject(style_content, elem, id) {\r\n        const stl = document.createElement('style');\r\n        stl.id = id;\r\n        stl.textContent = style_content;\r\n        elem.appendChild(stl);\r\n    }\r\n\r\n    // Инициализация контейнера\r\n    initContainer() {\r\n        this.container.id = 'christmas-container';\r\n        this.styleInject(this.style_content, this.container, 'christmas-style');\r\n        this.parent.appendChild(this.container);\r\n    }\r\n\r\n\r\n\r\n    init() {\r\n        this.initContainer();\r\n\r\n        this.container_size.x = window.innerWidth;\r\n        this.container_size.y = window.innerHeight;\r\n\r\n        this.itemsGenerator();\r\n    }\r\n}","// Импорт главного класса\r\nimport ChristmasLights from './christmas_main';\r\n\r\n// Класс для работы на странице ВК\r\nexport default class ChristmasLightsVK extends ChristmasLights {\r\n    constructor(param) {\r\n        super(param);\r\n    }\r\n\r\n    // Создание окна управления\r\n    initControls() {\r\n        let head_nav_btns = document.querySelector('.head_nav_btns');\r\n        let top_notify_btn = document.querySelector('#top_notify_btn');\r\n\r\n        if (head_nav_btns && top_notify_btn) {\r\n            let christmas_controls = document.createElement('span');\r\n            christmas_controls.classList.add('christmas-controls', 'top_nav_btn');\r\n            christmas_controls.textContent = 'Дратути!';\r\n\r\n\r\n\r\n            head_nav_btns.insertBefore(christmas_controls, top_notify_btn);\r\n\r\n            let christmas_controls_style = `\r\n.christmas-controls {\r\nwidth: auto;\r\nfloat: left;\r\npadding: 0 5px !important;\r\nheight: 42px;\r\ndisplay: inline-flex;\r\njustify-content: center;\r\nalign-items: center;\r\ncursor: pointer;\r\n}\r\n        `;\r\n            this.styleInject(christmas_controls_style, christmas_controls, 'christmas-controls-style');\r\n        }\r\n    }\r\n\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        // Если скрипт запущен в ВК, создадим окошко для управления\r\n        this.initControls();\r\n    }\r\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvanMvY2hyaXN0bWFzLmpzIiwiYXBwL2pzL21vZHVsZXMvY2hyaXN0bWFzX21haW4uanMiLCJhcHAvanMvbW9kdWxlcy9jaHJpc3RtYXNfdmsuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0VBOzs7O0FBRkE7QUFDQTtBQUdBO0FBQ0EsSUFBTSxlQUFlLHVyRUFBckIsQyxDQW9JQTs7QUFDQSxJQUFJLE1BQU0sQ0FBQyxHQUFQLEtBQWUsTUFBbkIsRUFBMkI7QUFDdkIsRUFBQSxxQkFBcUIsQ0FBQyxTQUFTLE1BQVQsR0FBa0I7QUFDcEMsUUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFkLEVBQW9CO0FBQ2hCLE1BQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxjQUFaO0FBRUEsTUFBQSxxQkFBcUIsQ0FBQyxNQUFELENBQXJCO0FBQ0gsS0FKRCxNQUlPO0FBQ0gsTUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLE1BQVosRUFBcUIsTUFBTSxDQUFDLFNBQVIsR0FBcUIsTUFBTSxDQUFDLFNBQVAsQ0FBaUIsTUFBdEMsR0FBK0MsRUFBbkUsRUFBdUUsNENBQXZFO0FBRUEsTUFBQSxNQUFNLENBQUMsZUFBUCxHQUF5QixJQUFJLHFCQUFKLENBQW9CO0FBQ3pDO0FBQ0EsUUFBQSxNQUFNLEVBQUUsRUFGaUM7QUFJekM7QUFDQSxRQUFBLFNBQVMsRUFBRSxFQUw4QjtBQU96QztBQUNBLFFBQUEsTUFBTSxFQUFFLE1BUmlDO0FBVXpDO0FBQ0EsUUFBQSxhQUFhLEVBQUU7QUFYMEIsT0FBcEIsQ0FBekIsQ0FIRyxDQWlCSDs7QUFDQSxVQUFNLFVBQVUsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixhQUF2QixDQUFuQjs7QUFDQSxVQUFJLFVBQVUsSUFBSSxNQUFNLENBQUMsZUFBekIsRUFBMEM7QUFDdEMsUUFBQSxVQUFVLENBQUMsZ0JBQVgsQ0FBNEIsT0FBNUIsRUFBcUMsWUFB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UUFBQSxrQkFBa0IsQ0FBQyxTQUFuQixDQUE2QixHQUE3QixDQUFpQyxvQkFBakMsRUFBdUQsYUFBdkQ7QUFDQSxRQUFBLGtCQUFrQixDQUFDLFdBQW5CLEdBQWlDLFVBQWpDO0FBSUEsUUFBQSxhQUFhLENBQUMsWUFBZCxDQUEyQixrQkFBM0IsRUFBK0MsY0FBL0M7QUFFQSxZQUFJLHdCQUF3Qix5TUFBNUI7QUFZQSxhQUFLLFdBQUwsQ0FBaUIsd0JBQWpCLEVBQTJDLGtCQUEzQyxFQUErRCwwQkFBL0Q7QUFDSDtBQUNKOzs7MkJBR007QUFDSCxrRkFERyxDQUdIOzs7QUFDQSxXQUFLLFlBQUw7QUFDSDs7OztFQXpDMEMsdUIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyDQmNC80L/QvtGA0YIg0LPQu9Cw0LLQvdC+0LPQviDQutC70LDRgdGB0LBcclxuLy8gaW1wb3J0IENocmlzdG1hc0xpZ2h0cyBmcm9tICcuL21vZHVsZXMvY2hyaXN0bWFzX21haW4nO1xyXG5pbXBvcnQgQ2hyaXN0bWFzTGlnaHRzIGZyb20gJy4vbW9kdWxlcy9jaHJpc3RtYXNfdmsnO1xyXG5cclxuLy8g0KHRgtC40LvQuCDQtNC70Y8g0YHQutGA0LjQv9GC0LBcclxuY29uc3QgY2hyaXN0bWFzX3N0eWxlID0gYFxyXG5ib2R5IHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgbWluLXdpZHRoOiAxMDAlO1xyXG4gIG1pbi1oZWlnaHQ6IDEwMHZoO1xyXG4gIG1hcmdpbjogMDtcclxufVxyXG5cclxuI2NocmlzdG1hcy1jb250YWluZXIge1xyXG4gIHBvc2l0aW9uOiBmaXhlZDtcclxuICB0b3A6IDA7XHJcbiAgbGVmdDogMDtcclxuICB3aWR0aDogMTAwJTtcclxuICBoZWlnaHQ6IDEwMCU7XHJcbiAgei1pbmRleDogLTk5OTk7XHJcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcclxufVxyXG5cclxuLmNocmlzdG1hcy1pdGVtIHtcclxuICB3aWR0aDogMTBweDtcclxuICBoZWlnaHQ6IDEwcHg7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHdpbGwtY2hhbmdlOiB0cmFuc2Zvcm0sIG9wYWNpdHk7XHJcbiAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG59XHJcblxyXG4uY2hyaXN0bWFzLWl0ZW1fcmVkIHtcclxuXHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbV95ZWxsb3cge1xyXG5cclxufVxyXG5cclxuLmNocmlzdG1hcy1pdGVtX2dyZWVuIHtcclxuXHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbV9ibHVlIHtcclxuXHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbTpiZWZvcmUge1xyXG4gIGNvbnRlbnQ6ICcnO1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgd2lkdGg6IDhweDtcclxuICBoZWlnaHQ6IDhweDtcclxuICB0b3A6IDUwJTtcclxuICBsZWZ0OiA1MCU7XHJcbiAgd2lsbC1jaGFuZ2U6IHRyYW5zZm9ybSwgb3BhY2l0eTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDFweCkgc2NhbGUoMCk7XHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbTphZnRlciB7XHJcbiAgY29udGVudDogJyc7XHJcbiAgZGlzcGxheTogYmxvY2s7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICB3aWR0aDogMTBweDtcclxuICBoZWlnaHQ6IDEwcHg7XHJcbiAgdG9wOiA1MCU7XHJcbiAgbGVmdDogNTAlO1xyXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMXB4KTtcclxufVxyXG5cclxuLmNocmlzdG1hcy1pdGVtX3JlZDpiZWZvcmUge1xyXG4gIC8qICNGQTBDMDAgKi9cclxuICBib3gtc2hhZG93OiAwIDAgMjBweCA2cHggcmdiYSgyNTAsIDEyLCAwLCAxKTtcclxuICBhbmltYXRpb24tZGVsYXk6IDBzO1xyXG59XHJcblxyXG4uY2hyaXN0bWFzLWl0ZW1fcmVkOmFmdGVyIHtcclxuICBiYWNrZ3JvdW5kOiAjRjMyNjEzO1xyXG59XHJcblxyXG4uY2hyaXN0bWFzLWl0ZW1feWVsbG93OmJlZm9yZSB7XHJcbiAgLyogI0ZBRjIwMCAqL1xyXG4gIGJveC1zaGFkb3c6IDAgMCAyMHB4IDZweCByZ2JhKDI1MCwgMjQyLCAwLCAuOCk7XHJcbiAgYW5pbWF0aW9uLWRlbGF5OiAuNXM7XHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbV95ZWxsb3c6YWZ0ZXIge1xyXG4gIGJhY2tncm91bmQ6ICNGMEYzNDM7XHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbV9ncmVlbjpiZWZvcmUge1xyXG4gIC8qICMyQUZBMDAgKi9cclxuICBib3gtc2hhZG93OiAwIDAgMjBweCA2cHggcmdiYSg0MiwgMjUwLCAwLCAuOCk7XHJcbiAgYW5pbWF0aW9uLWRlbGF5OiAxcztcclxufVxyXG5cclxuLmNocmlzdG1hcy1pdGVtX2dyZWVuOmFmdGVyIHtcclxuICBiYWNrZ3JvdW5kOiAjNjFGMzUxO1xyXG59XHJcblxyXG4uY2hyaXN0bWFzLWl0ZW1fYmx1ZTpiZWZvcmUge1xyXG4gIC8qICMyM0ZGRjQgKi9cclxuICBib3gtc2hhZG93OiAwIDAgMjBweCA4cHggcmdiYSgzNSwgMjU1LCAyNDQsIC42KTtcclxuICBhbmltYXRpb24tZGVsYXk6IDEuNXM7XHJcbn1cclxuXHJcbi5jaHJpc3RtYXMtaXRlbV9ibHVlOmFmdGVyIHtcclxuICBiYWNrZ3JvdW5kOiAjODlmM2VmO1xyXG59XHJcblxyXG4uY2hyaXN0bWFzLWl0ZW0tYW5pbTpiZWZvcmUge1xyXG4gIGFuaW1hdGlvbi1uYW1lOiBjaHJpc3RtYXMtaXRlbS1hbmltO1xyXG4gIGFuaW1hdGlvbi1kdXJhdGlvbjogMS43cztcclxuICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBsaW5lYXI7XHJcbiAgYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDogaW5maW5pdGU7XHJcbn1cclxuXHJcbkBrZXlmcmFtZXMgY2hyaXN0bWFzLWl0ZW0tYW5pbSB7XHJcbiAgMCUge1xyXG4gICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDFweCkgc2NhbGUoLjYpO1xyXG4gICAgICBvcGFjaXR5OiAuNztcclxuICB9XHJcbiAgNTAlIHtcclxuICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAxcHgpIHNjYWxlKC45KTtcclxuICAgICAgb3BhY2l0eTogMTtcclxuICB9XHJcbiAgMTAwJSB7XHJcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMXB4KSBzY2FsZSguNik7XHJcbiAgICAgIG9wYWNpdHk6IC43O1xyXG4gIH1cclxufVxyXG5gO1xyXG5cclxuXHJcblxyXG4vLyDQp9GC0L7QsdGLINC90LUg0LPRgNGD0LfQuNC70L7RgdGMINCyIGlmcmFtZVxyXG5pZiAod2luZG93LnRvcCA9PT0gd2luZG93KSB7XHJcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gbGF1bmNoKCkge1xyXG4gICAgICAgIGlmICghZG9jdW1lbnQuYm9keSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYm9keSDQtdGJ0LUg0L3QtdGCJyk7XHJcblxyXG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobGF1bmNoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnJWMlcycsICh3aW5kb3cubG9nX2NvbG9yKSA/IHdpbmRvdy5sb2dfY29sb3IucHVycGxlIDogJycsICcqQ2hyaXN0bWFzIGxpZ2h0cyog0JfQsNC/0YPRgdC6INGA0LDQsdC+0YfQtdCz0L4g0YHQutGA0LjQv9GC0LAnKTtcclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5jaHJpc3RtYXNMaWdodHMgPSBuZXcgQ2hyaXN0bWFzTGlnaHRzKHtcclxuICAgICAgICAgICAgICAgIC8vINCa0L7Qu9C40YfQtdGB0YLQstC+INGE0L7QvdCw0YDQuNC60L7QslxyXG4gICAgICAgICAgICAgICAgYW1vdW50OiA1MCxcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0L7RgtC60LvQvtC90LXQvdC40LUg0L7RgiDRhtC10L3RgtGA0LDQu9GM0L3QvtC5INC/0L7Qt9C40YbQuNC4XHJcbiAgICAgICAgICAgICAgICBkZXZpYXRpb246IDMwLFxyXG5cclxuICAgICAgICAgICAgICAgIC8vINCSINC60LDQutC+0Lkg0LHQu9C+0Log0LLRgdGC0LDQstC70Y/RgtGMICjQsNC70YzRhNCwLCDRgdC10LnRh9Cw0YEg0LPQu9GO0YfQuNGCINCy0YHQtSwg0LrRgNC+0LzQtSBib2R5KVxyXG4gICAgICAgICAgICAgICAgcGFyZW50OiAnYm9keScsXHJcblxyXG4gICAgICAgICAgICAgICAgLy8g0JjQvdGK0LXQutGG0LjRjyDRgdGC0LjQu9C10LkgKNC90LUg0YLRgNC+0LPQsNGC0YwpXHJcbiAgICAgICAgICAgICAgICBzdHlsZV9jb250ZW50OiBjaHJpc3RtYXNfc3R5bGVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDQmtC90L7Qv9C60LAg0L7QsdC90L7QstC70LXQvdC40Y8g0L/QvtC30LjRhtC40Lgg0YTQvtC90LDRgNC40LrQvtCyXHJcbiAgICAgICAgICAgIGNvbnN0IGJ0bl91cGRhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnRuX3VwZGF0ZScpO1xyXG4gICAgICAgICAgICBpZiAoYnRuX3VwZGF0ZSAmJiB3aW5kb3cuY2hyaXN0bWFzTGlnaHRzKSB7XHJcbiAgICAgICAgICAgICAgICBidG5fdXBkYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jaHJpc3RtYXNMaWdodHMudXBkYXRlUG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5cclxuLy8gLy8vLy8vLy8vLy8vLy8vLy8vIiwiLyogQ2hyaXN0bWFzIGxpZ2h0cyAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaHJpc3RtYXNMaWdodHMge1xyXG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuY29sb3JfY2xhc3NlcyA9IHtcclxuICAgICAgICAgICAgcmVkOiAnY2hyaXN0bWFzLWl0ZW1fcmVkJyxcclxuICAgICAgICAgICAgeWVsbG93OiAnY2hyaXN0bWFzLWl0ZW1feWVsbG93JyxcclxuICAgICAgICAgICAgZ3JlZW46ICdjaHJpc3RtYXMtaXRlbV9ncmVlbicsXHJcbiAgICAgICAgICAgIGJsdWU6ICdjaHJpc3RtYXMtaXRlbV9ibHVlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vINCe0LHRidC10LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0YTQvtC90LDRgNC40LrQvtCyXHJcbiAgICAgICAgdGhpcy5hbW91bnQgPSBzZXR0aW5ncy5hbW91bnQgfHwgNDA7XHJcblxyXG4gICAgICAgIC8vINCc0LDQutGB0LjQvNCw0LvRjNC90L7QtSDQvtGC0LrQu9C+0L3QtdC90LjQtSDRhNC+0L3QsNGA0LjQutC+0LIg0L7RgiDQsdCw0LfQvtCy0L7QuSDQv9C+0LfQuNGG0LjQuFxyXG4gICAgICAgIHRoaXMuZGV2aWF0aW9uID0gc2V0dGluZ3MuZGV2aWF0aW9uIHx8IDEwXHJcblxyXG4gICAgICAgIC8vINCa0L7Qu9C40YfQtdGB0YLQstC+INC60LDQttC00L7Qs9C+INGG0LLQtdGC0LBcclxuICAgICAgICB0aGlzLmNvbG9yX2Ftb3VudCA9IHtcclxuICAgICAgICAgICAgcmVkOiBNYXRoLmZsb29yKHRoaXMuYW1vdW50IC8gNCksXHJcbiAgICAgICAgICAgIHllbGxvdzogTWF0aC5mbG9vcih0aGlzLmFtb3VudCAvIDQpLFxyXG4gICAgICAgICAgICBncmVlbjogTWF0aC5mbG9vcih0aGlzLmFtb3VudCAvIDQpLFxyXG4gICAgICAgICAgICBibHVlOiB0aGlzLmFtb3VudCAtIChNYXRoLmZsb29yKHRoaXMuYW1vdW50IC8gNCkgKiAzKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g0KHQtdC70LXQutGC0L7RgCDQsdC70L7QutCwLCDQsiDQutC+0YLQvtGA0L7QvCDQsdGD0LTQtdGCINGB0L7Qt9C00LDQstCw0YLRjNGB0Y8g0LrQvtC90YLQtdC50L3QtdGAXHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnBhcmVudCkgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5cclxuICAgICAgICAvLyDQn9C10YDQtdC80LXQvdC90LDRjywg0YHQvtC00LXRgNC20LDRidCw0Y8g0LIg0YHQtdCx0LUg0YLQtdC60YHRgtC+0LLRi9C5INC60L7QvdGC0LXQvdGCINGB0YLQuNC70LXQuVxyXG4gICAgICAgIHRoaXMuc3R5bGVfY29udGVudCA9IHNldHRpbmdzLnN0eWxlX2NvbnRlbnQ7XHJcblxyXG4gICAgICAgIC8vINCa0L7QvdGC0LXQudC90LXRgCwg0LIg0LrQvtGC0L7RgNC+0Lwg0LHRg9C00YPRgiDRgdC+0LfQtNCw0LLQsNGC0YzRgdGPINGE0L7QvdCw0YDQuNC60LhcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAvLyDQoNCw0LfQvNC10YDRiyDQutC+0L3RgtC10LnQvdC10YDQsFxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyX3NpemUgPSB7XHJcbiAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgIHk6IDBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vINCc0LDRgdGB0LjQsiDRgdC+0LfQtNCw0L3QvdGL0YUg0Y3Qu9C10LzQtdC90YLQvtCyLdGE0L7QvdCw0YDQuNC60L7QslxyXG4gICAgICAgIHRoaXMuYnVmZmVyID0gW107XHJcblxyXG4gICAgICAgIC8vINCk0LvQsNCzINC/0LDRg9C30Ysg0LTQstC40LbQtdC90LjRj1xyXG4gICAgICAgIHRoaXMucGF1c2VfcnVuID0gZmFsc2U7XHJcblxyXG5cclxuICAgICAgICAvLyDQotC+0YfQutCwINCy0YXQvtC00LBcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiDRgNCw0L3QtNC+0LzQvdC+0LUg0YfQuNGB0LvQviDQsiDRg9C60LDQt9Cw0L3QvdGL0YUg0LPRgNCw0L3QuNGG0LDRhVxyXG4gICAgcmFuZChtaW4sIG1heCkge1xyXG4gICAgICAgIGxldCByYW5kID0gTWF0aC5mbG9vcihtaW4gKyBNYXRoLnJhbmRvbSgpICogKG1heCArIDEgLSBtaW4pKTtcclxuICAgICAgICBpZiAocmFuZCA9PT0gMCkge1xyXG4gICAgICAgICAgICByYW5kKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByYW5kO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRBbmltYXRpb24oaXRlbSkge1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uZWxlbS5jbGFzc0xpc3QuYWRkKCdjaHJpc3RtYXMtaXRlbS1hbmltJyk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICAvLyDQn9C10YDQstGL0Lkg0LfQstC/0YPRgdC6INC00LLQuNC20LXQvdC40Y8g0LLRgdC10YUg0YTQvtC90LDRgNC40LrQvtCyXHJcbiAgICBmaXJzdFJ1bigpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5idWZmZXIuZm9yRWFjaCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0ueCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnkgPSAwO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ydW5JdGVtKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdEFuaW1hdGlvbihpdGVtKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9LCAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDQl9Cw0L/Rg9GB0LrQsNC10YIg0LTQstC40LbQtdC90LjQtSDRhNC+0L3QsNGA0LjQutCwXHJcbiAgICBydW5JdGVtKGluZGV4KSB7XHJcbiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmJ1ZmZlcltpbmRleF07XHJcblxyXG4gICAgICAgIGxldCB4ID0gaXRlbS54ICsgdGhpcy5yYW5kKC00LCA0KTtcclxuICAgICAgICBsZXQgeSA9IGl0ZW0ueSArIHRoaXMucmFuZCgtNCwgNCk7XHJcblxyXG4gICAgICAgIHggPSAoeCA8ICgwIC0gdGhpcy5kZXZpYXRpb24pKSA/IDAgOiAoeCA+IHRoaXMuZGV2aWF0aW9uKSA/IDAgOiB4O1xyXG4gICAgICAgIHkgPSAoeSA8ICgwIC0gdGhpcy5kZXZpYXRpb24pKSA/IDAgOiAoeSA+IHRoaXMuZGV2aWF0aW9uKSA/IDAgOiB5O1xyXG5cclxuICAgICAgICB0aGlzLmJ1ZmZlcltpbmRleF0ueCA9IHg7XHJcbiAgICAgICAgdGhpcy5idWZmZXJbaW5kZXhdLnkgPSB5O1xyXG5cclxuICAgICAgICBsZXQgdHJhbnNmb3JtX2R1cmF0aW9uID0gdGhpcy5yYW5kKDE1MDAsIDI1MDApO1xyXG4gICAgICAgIHRoaXMuYnVmZmVyW2luZGV4XS5lbGVtLnN0eWxlLnRyYW5zaXRpb24gPSBgdHJhbnNmb3JtICR7dHJhbnNmb3JtX2R1cmF0aW9ufW1zIGVhc2UtaW4tb3V0LCB0b3AgJHt0cmFuc2Zvcm1fZHVyYXRpb259bXMgZWFzZS1pbi1vdXQsIGxlZnQgJHt0cmFuc2Zvcm1fZHVyYXRpb259bXMgZWFzZS1pbi1vdXRgO1xyXG4gICAgICAgIHRoaXMuYnVmZmVyW2luZGV4XS5lbGVtLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke3h9cHgsICR7eX1weCwgMXB4KWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JzQtdGC0L7QtCDQtNC70Y8g0L7RgdGC0LDQvdC+0LLQutC4L9Cy0L7Qt9C+0LHQvdC+0LLQu9C10L3QuNGPINC00LLQuNC20LXQvdC40Y8g0YTQvtC90LDRgNC40LrQvtCyXHJcbiAgICBwYXVzZVJ1bihmbGFnKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmbGFnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgdGhpcy5wYXVzZV9ydW4gPSBmbGFnO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucGF1c2VfcnVuID0gIXRoaXMucGF1c2VfcnVuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCF0aGlzLnBhdXNlX3J1bikge1xyXG4gICAgICAgICAgICB0aGlzLmZpcnN0UnVuKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAnUnVuJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAnUGF1c2UnO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC00LLQuNC20LXQvdC40Y8g0YTQvtC90LDRgNC40LrQvtCyINC4INGB0LvRg9GI0LDRgtC10LvRjyDQtdCz0L4g0L7QutC+0L3Rh9Cw0L3QuNGPXHJcbiAgICBpbml0UnVuKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCBlID0+IHtcclxuICAgICAgICAgICAgaWYgKGUucHJvcGVydHlOYW1lID09PSAndHJhbnNmb3JtJyAmJiAhdGhpcy5wYXVzZV9ydW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGUucHJvcGVydHlOYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucnVuSXRlbShOdW1iZXIoZS50YXJnZXQuZGF0YXNldC5jaHJpc3RtYXNJdGVtKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8g0Jgg0LfQsNC/0YPRgdC60LDQtdC8INC/0LXRgNCy0L7QtSDQtNCy0LjQttC10L3QuNC1XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlyc3RSdW4oKTtcclxuICAgICAgICB9LCAxMDApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCc0LXQvdGP0LXRgiDQv9C+0LvQvtC20LXQvdC40LUg0LLRgdC10YUg0YTQvtC90LDRgNC40LrQvtCyXHJcbiAgICB1cGRhdGVQb3NpdGlvbigpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lcl9zaXplLnggPSB3aW5kb3cuaW5uZXJXaWR0aDtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lcl9zaXplLnkgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5idWZmZXIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihpdGVtKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8vINCX0LDQtNCw0LXRgiDQv9C+0LfQuNGG0LjRjiDRhNC+0L3QsNGA0LjQutCwXHJcbiAgICBzZXRQb3NpdGlvbihpdGVtKSB7XHJcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5lbGVtLnN0eWxlLnRvcCA9IHRoaXMucmFuZCgwICsgMTUsIHRoaXMuY29udGFpbmVyX3NpemUueSAtIDE1KSArICdweCc7XHJcbiAgICAgICAgICAgIGl0ZW0uZWxlbS5zdHlsZS5sZWZ0ID0gdGhpcy5yYW5kKDAgKyAxNSwgdGhpcy5jb250YWluZXJfc2l6ZS54IC0gMTUpICsgJ3B4JztcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGFwcGVuZEl0ZW0oZWxlbSkge1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtKSlcclxuICAgIH1cclxuXHJcbiAgICAvLyDQk9C10L3QtdGA0LDRhtC40Y8g0YTQvtC90LDRgNC40LrQvtCyXHJcbiAgICBpdGVtc0dlbmVyYXRvcigpIHtcclxuICAgICAgICBsZXQgaXRlbV9pbmRleCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgY29sb3IgaW4gdGhpcy5jb2xvcl9hbW91bnQpIHtcclxuICAgICAgICAgICAgbGV0IGFtb3VudCA9IHRoaXMuY29sb3JfYW1vdW50W2NvbG9yXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBpdGVtID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgeTogMFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2NocmlzdG1hcy1pdGVtJywgdGhpcy5jb2xvcl9jbGFzc2VzW2NvbG9yXSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmRhdGFzZXQuY2hyaXN0bWFzSXRlbSA9IGl0ZW1faW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmVsZW0gPSBlbGVtO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQb3NpdGlvbihpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1ZmZlcltpdGVtX2luZGV4XSA9IGl0ZW07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGVuZEl0ZW0oZWxlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbV9pbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQn9C+0YHQu9C1INCz0LXQvdC10YDQsNGG0LjQuCDQstGB0LXRhSDRhNC+0L3QsNGA0LjQutC+0LIg0LLQtdGI0LDQtdC8INC90LAg0LrQvtC90YLQtdC50L3QtdGAINGB0LvRg9GI0LDRgtC10LvRjCB0cmFuc2l0aW9uZW5kXHJcbiAgICAgICAgdGhpcy5pbml0UnVuKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0JLRgdGC0LDQstC60LAg0YHRgtC40LvQtdC5INCy0L3Rg9GC0YDRjCDQutC+0L3RgtC10LnQvdC10YDQsFxyXG4gICAgc3R5bGVJbmplY3Qoc3R5bGVfY29udGVudCwgZWxlbSwgaWQpIHtcclxuICAgICAgICBjb25zdCBzdGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG4gICAgICAgIHN0bC5pZCA9IGlkO1xyXG4gICAgICAgIHN0bC50ZXh0Q29udGVudCA9IHN0eWxlX2NvbnRlbnQ7XHJcbiAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChzdGwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60L7QvdGC0LXQudC90LXRgNCwXHJcbiAgICBpbml0Q29udGFpbmVyKCkge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlkID0gJ2NocmlzdG1hcy1jb250YWluZXInO1xyXG4gICAgICAgIHRoaXMuc3R5bGVJbmplY3QodGhpcy5zdHlsZV9jb250ZW50LCB0aGlzLmNvbnRhaW5lciwgJ2NocmlzdG1hcy1zdHlsZScpO1xyXG4gICAgICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyKTtcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0Q29udGFpbmVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyX3NpemUueCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyX3NpemUueSA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgICAgdGhpcy5pdGVtc0dlbmVyYXRvcigpO1xyXG4gICAgfVxyXG59IiwiLy8g0JjQvNC/0L7RgNGCINCz0LvQsNCy0L3QvtCz0L4g0LrQu9Cw0YHRgdCwXHJcbmltcG9ydCBDaHJpc3RtYXNMaWdodHMgZnJvbSAnLi9jaHJpc3RtYXNfbWFpbic7XHJcblxyXG4vLyDQmtC70LDRgdGBINC00LvRjyDRgNCw0LHQvtGC0Ysg0L3QsCDRgdGC0YDQsNC90LjRhtC1INCS0JpcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hyaXN0bWFzTGlnaHRzVksgZXh0ZW5kcyBDaHJpc3RtYXNMaWdodHMge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW0pIHtcclxuICAgICAgICBzdXBlcihwYXJhbSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g0KHQvtC30LTQsNC90LjQtSDQvtC60L3QsCDRg9C/0YDQsNCy0LvQtdC90LjRj1xyXG4gICAgaW5pdENvbnRyb2xzKCkge1xyXG4gICAgICAgIGxldCBoZWFkX25hdl9idG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRfbmF2X2J0bnMnKTtcclxuICAgICAgICBsZXQgdG9wX25vdGlmeV9idG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdG9wX25vdGlmeV9idG4nKTtcclxuXHJcbiAgICAgICAgaWYgKGhlYWRfbmF2X2J0bnMgJiYgdG9wX25vdGlmeV9idG4pIHtcclxuICAgICAgICAgICAgbGV0IGNocmlzdG1hc19jb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICAgICAgY2hyaXN0bWFzX2NvbnRyb2xzLmNsYXNzTGlzdC5hZGQoJ2NocmlzdG1hcy1jb250cm9scycsICd0b3BfbmF2X2J0bicpO1xyXG4gICAgICAgICAgICBjaHJpc3RtYXNfY29udHJvbHMudGV4dENvbnRlbnQgPSAn0JTRgNCw0YLRg9GC0LghJztcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgaGVhZF9uYXZfYnRucy5pbnNlcnRCZWZvcmUoY2hyaXN0bWFzX2NvbnRyb2xzLCB0b3Bfbm90aWZ5X2J0bik7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hyaXN0bWFzX2NvbnRyb2xzX3N0eWxlID0gYFxyXG4uY2hyaXN0bWFzLWNvbnRyb2xzIHtcclxud2lkdGg6IGF1dG87XHJcbmZsb2F0OiBsZWZ0O1xyXG5wYWRkaW5nOiAwIDVweCAhaW1wb3J0YW50O1xyXG5oZWlnaHQ6IDQycHg7XHJcbmRpc3BsYXk6IGlubGluZS1mbGV4O1xyXG5qdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcbiAgICAgICAgYDtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZUluamVjdChjaHJpc3RtYXNfY29udHJvbHNfc3R5bGUsIGNocmlzdG1hc19jb250cm9scywgJ2NocmlzdG1hcy1jb250cm9scy1zdHlsZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICBzdXBlci5pbml0KCk7XHJcblxyXG4gICAgICAgIC8vINCV0YHQu9C4INGB0LrRgNC40L/RgiDQt9Cw0L/Rg9GJ0LXQvSDQsiDQktCaLCDRgdC+0LfQtNCw0LTQuNC8INC+0LrQvtGI0LrQviDQtNC70Y8g0YPQv9GA0LDQstC70LXQvdC40Y9cclxuICAgICAgICB0aGlzLmluaXRDb250cm9scygpO1xyXG4gICAgfVxyXG59Il19"}